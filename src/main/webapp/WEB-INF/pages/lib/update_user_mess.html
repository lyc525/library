<div class="searchback"></div>
<div class="searchpst1">
</div>
	<button class="searchusermess" type="submit">个人信息</button>
	<br />
	<div class="searchback3">
		<div class="row">
	<div class="col-xs-12">
		<div class="box">
			<!-- /.box-body -->
	 <div class="box-body table-responsive no-padding">
      <div class="box-header with-border">
        <h3 class="box-title">修改个人信息</h3>
      </div>
      <!-- /.box-header -->
      <!-- form start -->
        <div class="box-body">
          <div class="form-group">
            <label for="nameId" class="col-sm-2 control-label">会员姓名</label>

            <div class="col-sm-10">
             <input type="button" class="form-control" name="name" id="nameId" placeholder="会员姓名">
            </div>
          </div>
          <div class="form-group">
            <label for="noteId" class="col-sm-2 control-label">电话</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" name="note" id="phoneId" placeholder="电话">
            </div>
          </div>
          <div class="form-group">
            <label for="noteId" class="col-sm-2 control-label">爱好</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" name="note" id="hobbyId" placeholder="爱好">
            </div>
          </div>
           <div class="box-body1" style="display:none">
          <div class="form-group">
            <label for="nameId" class="col-sm-2 control-label">Id</label>

            <div class="col-sm-10">
              <input type="text" class="form-control" name="name" id="userId" placeholder="id">
            </div>
          </div>
		  </div>
        </div>
        <!-- /.box-body -->
        <div class="box-footer">
          <button type="button" class="btn btn-default btn-cancel">Cancel</button>
          <button type="button" class="btn btn-info pull-right btn-save">Save</button>
        </div>
        <!-- /.box-footer -->
    </div>
		</div>
		<!-- /.box -->
	</div>
</div>
	<script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript">
		$(function(){
			var username = $("#mainContentId").prop("username");	
		  	 //console.log("username111",username);
		  	 var url = "user/doSearchUser.do";
			 var params = {"username":username.name};
			 //console.log("params111",params);
			 $.post(url,params,function(result){
			 if(result.state == 1){
			    //console.log("result111",result);
				doInitParams(result.data);
			   }else{
			    	alert(result.message);
			    }
			});
			$(".box-footer").on("click",".btn-cancel",doCancel);
			$(".box-footer").on("click",".btn-save",doUpdateUserMess);
			$("#bookSearch").on("click",dofindSearch);
		});
		
		function dofindSearch(){
	        $("#mainContentId").load("index/doSearchList.do");
	    }
		
		function doInitParams(data){
			$("#userId").val(data.id);
			$("#nameId").val(data.username);
			$("#phoneId").val(data.phone);
			$("#hobbyId").val(data.hobby);
		}
		
		function doCancel(){
			$("#mainContentId").load("index/doSearchUserMess.do");
		}
		
		function doUpdateUserMess(){
			var url = "user/doUpdateUserMessById.do";
			var params = {
					id:$("#userId").val(),
					username:$("#nameId").val(),
					phone:$("#phoneId").val(),
					hobby:$("#hobbyId").val()
			};
			//console.log("params",params);
			$.post(url,params,function(result){
				if(result.state == 1){
					alert("update ok");
					doCancel();
				}else{
					alert(result.message);
				}
			});
		}
	</script>




